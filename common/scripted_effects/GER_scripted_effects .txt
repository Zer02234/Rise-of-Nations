#Important to put HIGHEST first
GER_mefo_bills_level_up = {
	if = {
		limit = { has_idea = GER_mefo_bills_17 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_17
			add_idea = GER_mefo_bills_18
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_16 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_16
			add_idea = GER_mefo_bills_17
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_15 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_15
			add_idea = GER_mefo_bills_16
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_14 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_14
			add_idea = GER_mefo_bills_15
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_13 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_13
			add_idea = GER_mefo_bills_14
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_12 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_12
			add_idea = GER_mefo_bills_13
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_11 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_11
			add_idea = GER_mefo_bills_12
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_10 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_10
			add_idea = GER_mefo_bills_11
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_9 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_9
			add_idea = GER_mefo_bills_10
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_8 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_8
			add_idea = GER_mefo_bills_9
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_7 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_7
			add_idea = GER_mefo_bills_8
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_6 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_6
			add_idea = GER_mefo_bills_7
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_5 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_5
			add_idea = GER_mefo_bills_6
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_4 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_4
			add_idea = GER_mefo_bills_5
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_3 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_3
			add_idea = GER_mefo_bills_4
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_2 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_2
			add_idea = GER_mefo_bills_3
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_1 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_1
			add_idea = GER_mefo_bills_2
		}
	}
}

#Important to put HIGHEST first
GER_remove_mefo_bills = {
	if = {
		limit = { has_idea = GER_mefo_bills_1 }
		remove_ideas = GER_mefo_bills_1
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_2 }
		remove_ideas = GER_mefo_bills_2
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_3 }
		remove_ideas = GER_mefo_bills_3
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_4 }
		remove_ideas = GER_mefo_bills_4
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_5 }
		remove_ideas = GER_mefo_bills_5
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_6 }
		remove_ideas = GER_mefo_bills_6
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_7 }
		remove_ideas = GER_mefo_bills_7
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_8 }
		remove_ideas = GER_mefo_bills_8
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_9 }
		remove_ideas = GER_mefo_bills_9
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_10 }
		remove_ideas = GER_mefo_bills_10
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_11 }
		remove_ideas = GER_mefo_bills_11
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_12 }
		remove_ideas = GER_mefo_bills_12
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_13 }
		remove_ideas = GER_mefo_bills_13
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_14 }
		remove_ideas = GER_mefo_bills_14
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_15 }
		remove_ideas = GER_mefo_bills_15
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_16 }
		remove_ideas = GER_mefo_bills_16
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_17 }
		remove_ideas = GER_mefo_bills_17
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_18 }
		remove_ideas = GER_mefo_bills_18
	}
}

# Like the level up effect except it runs in reverse
# For use when annexing the gold reserves of Austria, Czechoslovakia and Yugoslavia

GER_mefo_bills_level_down = {
	if = {
		limit = { has_idea = GER_mefo_bills_2 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_2
			add_idea = GER_mefo_bills_1
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_3 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_3
			add_idea = GER_mefo_bills_2
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_4 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_4
			add_idea = GER_mefo_bills_3
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_5 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_5
			add_idea = GER_mefo_bills_4
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_6 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_6
			add_idea = GER_mefo_bills_5
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_7 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_7
			add_idea = GER_mefo_bills_6
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_8 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_8
			add_idea = GER_mefo_bills_7
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_9 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_9
			add_idea = GER_mefo_bills_8
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_10 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_10
			add_idea = GER_mefo_bills_9
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_11 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_11
			add_idea = GER_mefo_bills_10
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_12 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_12
			add_idea = GER_mefo_bills_11
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_13 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_13
			add_idea = GER_mefo_bills_12
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_14 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_14
			add_idea = GER_mefo_bills_13
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_15 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_15
			add_idea = GER_mefo_bills_14
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_16 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_16
			add_idea = GER_mefo_bills_15
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_17 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_17
			add_idea = GER_mefo_bills_16
		}
	}
	else_if = {
		limit = { has_idea = GER_mefo_bills_18 }
		swap_ideas = {
			remove_idea = GER_mefo_bills_18
			add_idea = GER_mefo_bills_17
		}
	}
}

give_SOV_armor_research_bonuses = {
	add_tech_bonus = {
		name = med_armor_bonus
		ahead_reduction = 2
		category = cat_medium_armor
	}
	add_tech_bonus = {
		name = armor_bonus
		bonus = 1.0
		uses = 1
		category = armor
	}
}


initiate_GER_cw = {
	drop_cosmetic_tag = yes
	create_dynamic_country = {
	    original_tag = GER
	    add_political_power = 100
	    set_cosmetic_tag = GER_Wehrmart_Germany
		set_popularities = {
			democratic = 0
			neutrality = 45
			fascism = 55
			communism = 0
		}
		set_politics = {
			ruling_party = fascism
		    elections_allowed = no
		    last_election = "1935.12.17"
		    election_frequency = 48
		}
		reserve_dynamic_country = yes
	}
	create_dynamic_country = {
	    original_tag = GER
	    add_political_power = 100
	    set_cosmetic_tag = GER_Ordenstaat
		set_popularities = {
			democratic = 0
			neutrality = 0
			fascism = 100
			communism = 0
		}
		set_politics = {
			ruling_party = fascism
		    elections_allowed = no
		    last_election = "1935.12.17"
		    election_frequency = 48
		}
		reserve_dynamic_country = yes
	}
	every_country = {
		limit = {
			is_subject_of = GER
		}
		GER = {
			end_puppet = PREV
		}
	}
	GER = {
		every_state = {
			limit = {
				has_state_flag = civil_war_state_OSS
			}
			OSS = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				has_state_flag = civil_war_state_WER
			}
			WER = {
				transfer_state = PREV
			}
		}
		
		transfer_units_fraction = {
			target = WER
			size = 0.33
		}
		transfer_units_fraction = {
			target = OSS
			size = 0.5
		}
	}

	GGR = {
		declare_war_on = {
			target = OSS
			type = civil_war
		}
		add_civil_war_target = OSS
		declare_war_on = {
			target = WER
			type = civil_war
		}
		add_civil_war_target = WER
	}
	OSS = {

		declare_war_on ={
			target = WER
			type = civil_war
		}
		add_civil_war_target = WER
	}
	every_country = {
		limit = {
			is_subject_of = GGR

		}

		start_civil_war = {
    		ruling_party = fascism
			ideology = communism
    		size = 0.5
		}
		random_country = {
			limit = {
				original_tag = PREV
				has_government = communism
			}
			set_popularities = {
				democratic = 0
				neutrality = 0
				fascism = 0 
				communism = 100
			}
			SOV = {
				add_ai_strategy = {
   					type = support
    				id = PREV
    				value = 100
				}
			}
		}
	}
}
GER_inner_circle_set_ascension_cd = {
	set_country_flag = {
		flag = GER_inner_circle_cd_flag
		days = 175
		value = 1
	}
}
GER_add_or_modify_wunderwaffen = {
	if = {
		limit = {
			NOT = { has_dynamic_modifier = { modifier = GER_wunderwaffen_modifier }}
		}
		custom_effect_tooltip = GER_add_wunderwaffen_modifier_tt
		hidden_effect = {
			add_dynamic_modifier = { modifier = GER_wunderwaffen_modifier } 
		}
	}
	else = {
		custom_effect_tooltip = GER_modify_wunderwaffen_modifier_tt
	}
}
GER_add_or_modify_military_intelligence_service = {
	if = {
		limit = {
			NOT = { has_dynamic_modifier = { modifier = GER_military_intelligence_service_modifier } }
		}
		custom_effect_tooltip = GER_add_military_intelligence_service_modifier_tt
		hidden_effect = {
			add_dynamic_modifier = { modifier = GER_military_intelligence_service_modifier } 
		}
	}
	else = {
		custom_effect_tooltip = GER_modify_military_intelligence_service_modifier_tt
	}
}
GER_create_operative_eleysa_bazna = { #Absorb the Abwehr / Expand SS Security Duties
	create_operative_leader = {
		name = GER_eleysa_bazna
		GFX = GFX_portrait_eleysa_bazna
		traits = { operative_infiltrator }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { GER TUR KOS ALB }
		gender = male
	}
}
GER_modify_army_modifier = {
	if = {
		limit = { 
			has_dynamic_modifier = { modifier = GER_army_modifier }
		}
		custom_effect_tooltip = GER_modify_army_modifier_tt
	}
	else_if = {
		limit = { 
			has_dynamic_modifier = { modifier = GER_army_communist_modifier }
		}
		custom_effect_tooltip = GER_modify_army_communist_modifier_tt
	}
}
GER_create_operative_savitri_devi = { #Propaganda Master
	create_operative_leader = {
		name = GER_savitri_devi
		GFX = GFX_portrait_GER_savitri_devi
		traits = { operative_natural_orator operative_linguist operative_well_groomed }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { GRE FRA RAJ }
		gender = female
	}
}
GER_remove_replaced_advisor_1_effects = {
	custom_effect_tooltip = {
		localization_key = replace_ascended_advisor_tt
		CHARACTER = [GetAscendedAdvisorName1]
		TRAIT = [GetAscendedAdvisorTrait1]
	}
	hidden_effect = {
		if = { # TODT REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 1 }
			}
			GER_remove_todt_effects = yes
		}
		else_if = { # SPEER REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 2 }
			}
			GER_remove_speer_effects = yes
		}
		else_if = { # GÖRING REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 3 }
			}
			GER_remove_goring_effects = yes
		}
		else_if = { # HIMMLER REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 4 }
			}
			GER_remove_himmler_effects = yes
		}
		else_if = { # GOEBBELS REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 5 }
			}
			GER_remove_goebbels_effects = yes
		}
		else_if = { # HESS REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 6 }
			}
			GER_remove_hess_effects = yes
		}
		else_if = { # BORMANN REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_1 = 7 }
			}
			GER_remove_bormann_effects = yes
		}
		else = {
			log = "Something bad happened trying to remove advisor [?GER_ascended_advisor_1] effects."
		}
	}
}

GER_remove_replaced_advisor_2_effects = {
	custom_effect_tooltip = {
		localization_key = replace_ascended_advisor_tt
		CHARACTER = [GetAscendedAdvisorName2]
		TRAIT = [GetAscendedAdvisorTrait2]
	}
	hidden_effect = {
		if = { # TODT REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 1 }
			}
			GER_remove_todt_effects = yes
		}
		else_if = { # SPEER REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 2 }
			}
			GER_remove_speer_effects = yes
		}
		else_if = { # GÖRING REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 3 }
			}
			GER_remove_goring_effects = yes
		}
		else_if = { # HIMMLER REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 4 }
			}
			GER_remove_himmler_effects = yes
		}
		else_if = { # GOEBBELS REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 5 }
			}
			GER_remove_goebbels_effects = yes
		}
		else_if = { # HESS REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 6 }
			}
			GER_remove_hess_effects = yes
		}
		else_if = { # BORMANN REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_2 = 7 }
			}
			GER_remove_bormann_effects = yes
		}
		else = {
			log = "Something bad happened trying to remove advisor [?GER_ascended_advisor_2] effects."
		}
	}
}

GER_remove_replaced_advisor_3_effects = {
	custom_effect_tooltip = {
		localization_key = replace_ascended_advisor_tt
		CHARACTER = [GetAscendedAdvisorName3]
		TRAIT = [GetAscendedAdvisorTrait3]
	}
	hidden_effect = {
		if = { # TODT REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 1 }
			}
			GER_remove_todt_effects = yes
		}
		else_if = { # SPEER REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 2 }
			}
			GER_remove_speer_effects = yes
		}
		else_if = { # GÖRING REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 3 }
			}
			GER_remove_goring_effects = yes
		}
		else_if = { # HIMMLER REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 4 }
			}
			GER_remove_himmler_effects = yes
		}
		else_if = { # GOEBBELS REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 5 }
			}
			GER_remove_goebbels_effects = yes
		}
		else_if = { # HESS REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 6 }
			}
			GER_remove_hess_effects = yes
		}
		else_if = { # BORMANN REPLACED
			limit = {
				check_variable = { GER_ascended_advisor_3 = 7 }
			}
			GER_remove_bormann_effects = yes
		}
		else = {
			log = "Something bad happened trying to remove advisor [?GER_ascended_advisor_3] effects."
		}
	}
}

# Adding the new advisor effects after having replaced someone else
GER_add_replacing_advisor_effects = {
	if = { # TODT ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 1 }
		}
		GER_add_todt_effects = yes
	}
	else_if = { # SPEER ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 2 }
		}
		GER_add_speer_effects = yes
	}
	else_if = { # GÖRING ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 3 }
		}
		GER_add_goring_effects = yes
	}
	else_if = { # HIMMLER ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 4 }
		}
		GER_add_himmler_effects = yes
	}
	else_if = { # GOEBBELS ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 5 }
		}
		GER_add_goebbels_effects = yes
	}
	else_if = { # HESS ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 6 }
		}
		GER_add_hess_effects = yes
	}
	else_if = { # BORMANN ADDED
		limit = {
			check_variable = { GER_ascending_advisor = 7 }
		}
		GER_add_bormann_effects = yes
	}
	else = {
		log = "Something bad happened trying to add advisor [?GER_ascending_advisor] effects."
	}
}
GER_add_todt_effects = {
	if = {
		limit = {
			has_completed_focus = GER_autonomous_organization_todt
		}
		add_ideas = GER_todt_reich_minister_of_armaments
	}
	else_if = {
		limit = {
			has_completed_focus = GER_ascension_of_todt
		}
		add_ideas = GER_todt_reich_engineer
	}
}

GER_remove_todt_effects = {
	if = {
		limit = {
			has_idea = GER_todt_reich_minister_of_armaments
		}
		remove_ideas = GER_todt_reich_minister_of_armaments
	}
	else_if = {
		limit = {
			has_idea = GER_todt_reich_engineer
		}
		remove_ideas = GER_todt_reich_engineer
	}
	else = {
		log = "NOTHING TO REMOVE FROM TODT"
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_form_organization_todt
		}
		deactivate_shine_on_focus = GER_form_organization_todt
		clr_country_flag = GER_form_organization_todt_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_autonomous_organization_todt
		}
		deactivate_shine_on_focus = GER_autonomous_organization_todt
		clr_country_flag = GER_autonomous_organization_todt_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_wunderwaffe
			check_variable = { GER_wonder_weapons_focus_advisor = 1 }
		}
		deactivate_shine_on_focus = GER_wunderwaffe
		clr_country_flag = GER_wunderwaffe_in_progress_flag
		set_variable = { GER_wonder_weapons_focus_advisor = 0 }
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_ascension_of_todt
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE TODT FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 1 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 1 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 1 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}

# ADD/REMOVE SPEER EFFECTS
GER_add_speer_effects = {
	if = {
		limit = {
			has_completed_focus = GER_plenipotentiary_of_armaments
		}
		add_ideas = GER_speer_reich_minister_of_armaments
	}
	else_if = {
		limit = {
			has_completed_focus = GER_ascension_of_speer
		}
		add_ideas = GER_speer_reich_architect
	}
}

GER_remove_speer_effects = {
	if = {
		limit = {
			has_idea = GER_speer_reich_minister_of_armaments
		}
		remove_ideas = GER_speer_reich_minister_of_armaments
	}
	else_if = {
		limit = {
			has_idea = GER_speer_reich_architect
		}
		remove_ideas = GER_speer_reich_architect
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_employ_philipp_holzmann
		}
		deactivate_shine_on_focus = GER_employ_philipp_holzmann
		clr_country_flag = GER_employ_philipp_holzmann_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_plenipotentiary_of_armaments
		}
		deactivate_shine_on_focus = GER_plenipotentiary_of_armaments
		clr_country_flag = GER_plenipotentiary_of_armaments_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_wunderwaffe
			check_variable = { GER_wonder_weapons_focus_advisor = 2 }
		}
		deactivate_shine_on_focus = GER_wunderwaffe
		clr_country_flag = GER_wunderwaffe_in_progress_flag
		set_variable = { GER_wonder_weapons_focus_advisor = 0 }
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_ascension_of_speer
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE SPEER FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 2 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 2 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 2 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}

# ADD/REMOVE GÖRING EFFECTS
GER_add_goring_effects = {
	if = {
		limit = {
			has_completed_focus = GER_plenipotentiary_of_the_four_year_plan
		}
		add_ideas = GER_goring_four_year_plan_plenipotentiary
	}
	else_if = {
		limit = {
			has_completed_focus = GER_ascension_of_goring
		}
		add_ideas = GER_goring_overseer_four_year_plan
	}
}

GER_remove_goring_effects = {
	if = {
		limit = {
			has_idea = GER_goring_four_year_plan_plenipotentiary
		}
		remove_ideas = GER_goring_four_year_plan_plenipotentiary
	}
	else_if = {
		limit = {
			has_idea = GER_goring_overseer_four_year_plan
		}
		remove_ideas = GER_goring_overseer_four_year_plan
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_prioritize_the_four_year_plan
		}
		deactivate_shine_on_focus = GER_prioritize_the_four_year_plan
		clr_country_flag = GER_prioritize_the_four_year_plan_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_plenipotentiary_of_the_four_year_plan
		}
		deactivate_shine_on_focus = GER_plenipotentiary_of_the_four_year_plan
		clr_country_flag = GER_plenipotentiary_of_the_four_year_plan_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_integration_of_puppet_economies
		}
		deactivate_shine_on_focus = GER_integration_of_puppet_economies
		clr_country_flag = GER_integration_of_puppet_economies_in_progress_flag
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_ascension_of_goring
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE GÖRING FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 3 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 3 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 3 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}

# ADD/REMOVE HIMMLER EFFECTS
GER_add_himmler_effects = {
	log ="ADDING HIMMLER"
	if = {
		limit = {
			has_completed_focus = GER_strengthen_the_waffen_ss
		}
		add_ideas = GER_himmler_reichsfuhrer_ss
	}
	else_if = {
		limit = {
			OR = {
				has_completed_focus = GER_expand_ss_security_duties
				has_completed_focus = GER_absorb_the_abwehr
			}
		}
		add_ideas = GER_himmler_director_reich_security
	}
	else_if = {
		limit = {
			has_completed_focus = GER_ascension_of_himmler
		}
		add_ideas = GER_himmler_chief_of_german_police
	}

	custom_effect_tooltip = generic_skip_one_line_tt

	country_event = GER_inner_circle_himmler.00
}

GER_remove_himmler_effects = {
	if = {
		limit = {
			has_idea = GER_himmler_reichsfuhrer_ss
		}
		remove_ideas = GER_himmler_reichsfuhrer_ss
	}
	else_if = {
		limit = {
			has_idea = GER_himmler_director_reich_security
		}
		remove_ideas = GER_himmler_director_reich_security
	}
	else_if = {
		limit = {
			has_idea = GER_himmler_chief_of_german_police
		}
		remove_ideas = GER_himmler_chief_of_german_police
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_expand_ss_security_duties
		}
		deactivate_shine_on_focus = GER_expand_ss_security_duties
		clr_country_flag = GER_expand_ss_security_duties_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_strengthen_the_waffen_ss
		}
		deactivate_shine_on_focus = GER_strengthen_the_waffen_ss
		clr_country_flag = GER_strengthen_the_waffen_ss_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_expand_gestapo
		}
		deactivate_shine_on_focus = GER_expand_gestapo
		clr_country_flag = GER_expand_gestapo_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_absorb_the_abwehr
		}
		deactivate_shine_on_focus = GER_absorb_the_abwehr
		clr_country_flag = GER_absorb_the_abwehr_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_hegemony_of_the_ss
		}
		deactivate_shine_on_focus = GER_hegemony_of_the_ss
		clr_country_flag = GER_hegemony_of_the_ss_in_progress_flag
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_ascension_of_himmler
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE HIMMLER FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 4 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 4 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 4 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}

# ADD/REMOVE GOEBBELS EFFECTS
GER_add_goebbels_effects = {
	if = {
		limit = {
			has_completed_focus = GER_propaganda_master
		}
		add_ideas = GER_goebbels_reich_minister_of_propaganda_master
	}
	else_if = {
		limit = {
			has_completed_focus = GER_fund_the_film_department
		}
		add_ideas = GER_goebbels_reich_minister_of_propaganda_film
	}
	else_if = {
		limit = {
			has_completed_focus = GER_ministry_of_public_enlightenment
		}
		add_ideas = GER_goebbels_reich_minister_of_propaganda_ministry
	}
	else_if = {
		limit = {
			has_completed_focus = GER_ascension_of_goebbels
		}
		add_ideas = GER_goebbels_reich_minister_of_propaganda
	}
}

GER_remove_goebbels_effects = {
	if = {
		limit = {
			has_idea = GER_goebbels_reich_minister_of_propaganda_master
		}
		remove_ideas = GER_goebbels_reich_minister_of_propaganda_master
	}
	else_if = {
		limit = {
			has_idea = GER_goebbels_reich_minister_of_propaganda_film
		}
		remove_ideas = GER_goebbels_reich_minister_of_propaganda_film
	}
	else_if = {
		limit = {
			has_idea = GER_goebbels_reich_minister_of_propaganda_ministry
		}
		remove_ideas = GER_goebbels_reich_minister_of_propaganda_ministry
	}
	else_if = {
		limit = {
			has_idea = GER_goebbels_reich_minister_of_propaganda
		}
		remove_ideas = GER_goebbels_reich_minister_of_propaganda
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_ministry_of_public_enlightenment
		}
		deactivate_shine_on_focus = GER_ministry_of_public_enlightenment
		clr_country_flag = GER_ministry_of_public_enlightenment_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_fund_the_film_department
		}
		deactivate_shine_on_focus = GER_fund_the_film_department
		clr_country_flag = GER_fund_the_film_department_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_propaganda_master
		}
		deactivate_shine_on_focus = GER_propaganda_master
		clr_country_flag = GER_propaganda_master_in_progress_flag
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_ascension_of_goebbels
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE GOEBBELS FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 5 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 5 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 5 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}

# ADD/REMOVE HESS EFFECTS
GER_add_hess_effects = {
	if = {
		limit = {
			has_completed_focus = GER_total_control_over_domestic_affairs
		}
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			add_ideas = GER_hess_first_among_equals
		}
		else = {
			add_ideas = GER_hess_first_among_equals_no_aat
		}
	}
	else_if = {
		limit = {
			has_completed_focus = GER_rally_the_industrialists
		}
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			add_ideas = GER_hess_party_chancellor_improved
		}
		else = {
			add_ideas = GER_hess_party_chancellor_improved_no_aat
		}
	}
	else_if = {
		limit = {
			has_completed_focus = GER_party_chancellor_hess
		}
		add_ideas = GER_hess_party_chancellor
	}
}

GER_remove_hess_effects = {
	if = {
		limit = {
			OR = {
				has_idea = GER_hess_first_among_equals
				has_idea = GER_hess_first_among_equals_no_aat
			}
		}
		if = {
			limit = {
				has_idea = GER_hess_first_among_equals
			}
			remove_ideas = GER_hess_first_among_equals
		}
		else = {
			remove_ideas = GER_hess_first_among_equals
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = GER_hess_party_chancellor_improved
				has_idea = GER_hess_party_chancellor_improved_no_aat
			}
		}
		if = {
			limit = {
				has_idea = GER_hess_party_chancellor_improved
			}
			remove_ideas = GER_hess_party_chancellor_improved
		}
		else = {
			remove_ideas = GER_hess_party_chancellor_improved_no_aat
		}
	}
	else_if = {
		limit = {
			has_idea = GER_hess_party_chancellor
		}
		remove_ideas = GER_hess_party_chancellor
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_optimize_reich_labour_service
			check_variable = { GER_optimize_reich_service_focus_advisor = 6 }
		}
		deactivate_shine_on_focus = GER_optimize_reich_labour_service
		clr_country_flag = GER_optimize_reich_labour_service_in_progress_flag
		set_variable = { GER_optimize_reich_service_focus_advisor = 0 }
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_rally_the_industrialists
		}
		deactivate_shine_on_focus = GER_rally_the_industrialists
		clr_country_flag = GER_rally_the_industrialists_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_total_control_over_domestic_affairs
			check_variable = { GER_total_control_over_domestic_affairs_focus_advisor = 6 }
		}
		deactivate_shine_on_focus = GER_total_control_over_domestic_affairs
		clr_country_flag = GER_total_control_over_domestic_affairs_in_progress_flag
		set_variable = { GER_total_control_over_domestic_affairs_focus_advisor = 0 }
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_party_chancellor_hess
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE HESS FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 6 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 6 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 6 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}

# ADD/REMOVE BORMANN EFFECTS
GER_add_bormann_effects = {
	if = {
		limit = {
			has_completed_focus = GER_total_control_over_domestic_affairs
		}
		add_ideas = GER_bormann_brown_eminence
	}
	else_if = {
		limit = {
			has_completed_focus = GER_glorify_party_rallies
		}
		add_ideas = GER_bormann_secretary_to_the_fuhrer_improved
	}
	else_if = {
		limit = {
			has_completed_focus = GER_party_chancellor_bormann
		}
		add_ideas = GER_bormann_secretary_to_the_fuhrer
	}
}

GER_remove_bormann_effects = {
	if = {
		limit = {
			has_idea = GER_bormann_brown_eminence
		}
		remove_ideas = GER_bormann_brown_eminence
	}
	else_if = {
		limit = {
			has_idea = GER_bormann_secretary_to_the_fuhrer_improved
		}
		remove_ideas = GER_bormann_secretary_to_the_fuhrer_improved
	}
	else_if = {
		limit = {
			has_idea = GER_bormann_secretary_to_the_fuhrer
		}
		remove_ideas = GER_bormann_secretary_to_the_fuhrer
	}

	if = { #STOP ANY FOCUS IN-PROGRESS (WITH SHINY EFFECT)
		limit = {
			has_shine_effect_on_focus = GER_optimize_reich_labour_service
			check_variable = { GER_optimize_reich_service_focus_advisor = 7 }
		}
		deactivate_shine_on_focus = GER_optimize_reich_labour_service
		clr_country_flag = GER_optimize_reich_labour_service_in_progress_flag
		set_variable = { GER_optimize_reich_service_focus_advisor = 0 }
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_glorify_party_rallies
		}
		deactivate_shine_on_focus = GER_glorify_party_rallies
		clr_country_flag = GER_glorify_party_rallies_in_progress_flag
	}
	else_if = {
		limit = {
			has_shine_effect_on_focus = GER_total_control_over_domestic_affairs
			check_variable = { GER_total_control_over_domestic_affairs_focus_advisor = 7 }
		}
		deactivate_shine_on_focus = GER_total_control_over_domestic_affairs
		clr_country_flag = GER_total_control_over_domestic_affairs_in_progress_flag
		set_variable = { GER_total_control_over_domestic_affairs_focus_advisor = 0 }
	}

	#Uncomplete Ascension focus so that he can be picked later on
	uncomplete_national_focus = {
		focus = GER_party_chancellor_bormann
		uncomplete_children = no
		refund_political_power = no
	}

	if = { # REMOVE BORMANN FROM ASCENDED ADVISOR
		limit = {
			check_variable = { GER_ascended_advisor_1 = 7 }
		}
		set_variable = { GER_ascended_advisor_1 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_2 = 7 }
		}
		set_variable = { GER_ascended_advisor_2 = 0 }
	}
	else_if = {
		limit = {
			check_variable = { GER_ascended_advisor_3 = 7 }
		}
		set_variable = { GER_ascended_advisor_3 = 0 }
	}
}